<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Balloon Game</title>
  <link rel="stylesheet" href="style.css">
  <style>
    #loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; color: #fff; display: flex; justify-content: center; align-items: center; z-index: 1000; }
    canvas { display: block; }
    #bottom-menu { position: fixed; bottom: 0; width: 100%; background: rgba(0, 0, 0, 0.7); display: flex; justify-content: space-around; padding: 10px 0; }
    .menu-button { width: 60px; height: 60px; background-size: contain; background-repeat: no-repeat; }
    .menu-layer { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); justify-content: center; align-items: center; flex-direction: column; color: #fff; }
    #back-button { position: absolute; top: 10px; left: 10px; padding: 10px; background: #333; color: #fff; border: none; }
    #shop-button-glow { box-shadow: 0 0 10px #00ff00; }
  </style>
</head>
<body>
  <div id="loading-screen">Loading...</div>
  <canvas id="gameCanvas"></canvas>
  <div id="bottom-menu">
    <button id="play-button" class="menu-button" data-layer="play-layer" style="background-image: url('assets/play.png'); width: 80px; height: 80px;"></button>
    <button id="skins-button" class="menu-button" data-layer="skins-layer" style="background-image: url('assets/skins.png');"></button>
    <button id="tasks-button" class="menu-button" data-layer="tasks-layer" style="background-image: url('assets/tasks.png');"></button>
    <button id="leaderboard-button" class="menu-button" data-layer="leaderboard-layer" style="background-image: url('assets/leaderboard.png');"></button>
    <button id="wallet-button" class="menu-button" data-layer="wallet-layer" style="background-image: url('assets/wallet.png');"></button>
  </div>
  <button id="back-button" style="display: none;">Back</button>
  <div id="shop-button-glow"></div>
  <div id="play-layer" class="menu-layer">
    <div>
      <h2>Play</h2>
      <button class="menu-button play" data-layer="play-layer" style="background-image: url('assets/play.png'); width: 80px; height: 80px;"></button>
      <button class="back-button">Back</button>
    </div>
  </div>
  <div id="skins-layer" class="menu-layer">
    <div>
      <h2>Skins</h2>
      <button onclick="changeSkin('balloon')">Default</button>
      <button onclick="changeSkin('red')">Red</button>
      <button onclick="changeSkin('blue')">Blue</button>
      <button onclick="changeSkin('silent')">Silent</button>
      <button class="back-button">Back</button>
    </div>
  </div>
  <div id="tasks-layer" class="menu-layer">
    <div>
      <h2>Tasks</h2>
      <ul id="task-list"></ul>
      <button class="back-button">Back</button>
    </div>
  </div>
  <div id="leaderboard-layer" class="menu-layer">
    <div>
      <h2>Leaderboard</h2>
      <div id="leaderboard-list"></div>
      <button class="back-button">Back</button>
    </div>
  </div>
  <div id="wallet-layer" class="menu-layer">
    <div>
      <h2>Wallet</h2>
      <p>Score: <span id="score-display">0</span></p>
      <p>High Score: <span id="high-score-display">0</span></p>
      <p>Tokens: <span id="token-display">0</span></p>
      <button class="back-button">Back</button>
    </div>
  </div>
  <div id="shop-layer" class="menu-layer">
    <div>
      <h2>Shop</h2>
      <button class="back-button">Back</button>
    </div>
  </div>
  <div id="settings-layer" class="menu-layer">
    <div>
      <h2>Settings</h2>
      <label><input type="checkbox" id="vibration-toggle" checked> Vibration & Haptics</label><br>
      <button class="back-button">Back</button>
    </div>
  </div>
  <div id="score-display-top" style="position: fixed; top: 10px; left: 10px; color: #fff; font-family: 'Press Start 2P', monospace;">0</div>
  <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-database.js"></script>
  <script>
    // Firebase config (replace with your own)
    const firebaseConfig = {
      apiKey: "your-api-key",
      authDomain: "your-auth-domain",
      databaseURL: "your-database-url",
      projectId: "your-project-id",
      storageBucket: "your-storage-bucket",
      messagingSenderId: "your-messaging-sender-id",
      appId: "your-app-id"
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    window.saveScore = function(score) {
      database.ref('scores/' + userId).set({ score: score });
    };
    window.getUserData = function() {
      database.ref('users/' + userId).once('value').then((snapshot) => {
        const data = snapshot.val();
        document.getElementById('token-display').textContent = data ? data.tokens || 0 : 0;
      });
    };
    window.addTokens = function(amount) {
      database.ref('users/' + userId).once('value').then((snapshot) => {
        const data = snapshot.val() || { tokens: 0 };
        data.tokens = (data.tokens || 0) + amount;
        database.ref('users/' + userId).set(data);
        document.getElementById('token-display').textContent = data.tokens;
      });
    };
    window.updateLeaderboard = function() {
      database.ref('scores').orderByChild('score').limitToLast(10).once('value', (snapshot) => {
        const scores = [];
        snapshot.forEach((childSnapshot) => {
          scores.unshift({ id: childSnapshot.key, score: childSnapshot.val().score });
        });
        const leaderboardList = document.getElementById('leaderboard-list');
        leaderboardList.innerHTML = scores.map(s => `<div>${s.id}: ${s.score}</div>`).join('');
      });
    };
  </script>
  <script src="game.js"></script>
</body>
</html>